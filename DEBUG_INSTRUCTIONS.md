# Инструкции по отладке расширения

## Шаги для тестирования:

### 1. Загрузка расширения в Chrome
1. Откройте Chrome
2. Перейдите в `chrome://extensions/`
3. Включите "Режим разработчика" (Developer mode)
4. Нажмите "Загрузить распакованное расширение" (Load unpacked)
5. Выберите папку `src` из этого проекта

### 2. Тестирование на тестовой странице
1. Откройте тестовую страницу: http://localhost:8000/salesforce-test.html
2. Откройте Developer Tools (F12)
3. Перейдите на вкладку Console
4. Попробуйте активировать расширение одним из способов:
   - Нажмите на иконку расширения в панели инструментов
   - Используйте горячие клавиши Ctrl+Shift+A (Windows/Linux) или Cmd+Shift+A (Mac)

### 3. Что проверить в консоли:
Должны появиться следующие сообщения:
```
Background script sending message to content script
Message data: {command: "showApiName", ...}
Content script received message: {command: "showApiName", ...}
Processing showApiName command
Field metadata received: {...}
updateFieldMetadata called with: {...}
Updated currentFieldMetadata: {...}
```

### 4. Проверка UI:
- После активации расширения рядом с полями должны появиться API имена
- Рядом с каждым API именем должна быть кнопка со стрелкой (→)
- При нажатии на стрелку должно появиться всплывающее окно с метаданными поля

### 5. Отладка кнопки метаданных:
При нажатии на кнопку со стрелкой в консоли должны появиться:
```
Metadata button clicked: [API_NAME] [LABEL]
showMetadataPopup called with: [API_NAME] [LABEL]
Current field metadata: {...}
Field data for [API_NAME]: {...}
```

## Возможные проблемы:

### Расширение не активируется:
- Проверьте, что расширение загружено и включено в chrome://extensions/
- Убедитесь, что вы находитесь на правильной странице
- Проверьте консоль на наличие ошибок

### Кнопки метаданных не работают:
- Убедитесь, что API имена отображаются на странице
- Проверьте, что кнопки со стрелками видны
- Проверьте консоль на наличие ошибок JavaScript

### Метаданные не отображаются:
- Убедитесь, что fieldMetadata передается корректно
- Проверьте, что currentFieldMetadata содержит данные для нужного поля
- Проверьте стили CSS для всплывающего окна

## Тестирование на реальном Salesforce:
1. Перейдите на любую страницу записи в Salesforce (Lightning или Classic)
2. Активируйте расширение
3. Проверьте, что API имена отображаются корректно
4. Протестируйте кнопки метаданных